<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Backtest Documentation · Backtest Documentation</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Backtest Documentation</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Backtest Documentation</a><ul class="internal"><li><a class="tocitem" href="#Intent"><span>Intent</span></a></li><li><a class="tocitem" href="#Core-Ideas"><span>Core Ideas</span></a></li><li><a class="tocitem" href="#Functions"><span>Functions</span></a></li><li><a class="tocitem" href="#Types"><span>Types</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Backtest Documentation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Backtest Documentation</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/maxholloway/Backtest.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Backtest-Documentation"><a class="docs-heading-anchor" href="#Backtest-Documentation">Backtest Documentation</a><a id="Backtest-Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Backtest-Documentation" title="Permalink"></a></h1><h2 id="Intent"><a class="docs-heading-anchor" href="#Intent">Intent</a><a id="Intent-1"></a><a class="docs-heading-anchor-permalink" href="#Intent" title="Permalink"></a></h2><p><code>Backtest.jl</code> exists in order to provide a straightforward interface for performing backtests in Julia. Moreover, I (Max Holloway) really like some of the ideas from the python framework <code>Backtrader</code>, and I wanted to make my own (better, simpler) version of it in Julia.</p><h2 id="Core-Ideas"><a class="docs-heading-anchor" href="#Core-Ideas">Core Ideas</a><a id="Core-Ideas-1"></a><a class="docs-heading-anchor-permalink" href="#Core-Ideas" title="Permalink"></a></h2><p>In order to get up and running, one only needs to know how to make a <code>DataReader</code> and how to fill in <code>StrategyOptions</code>. After that, you can run your backtest! To add to the backtest, you will need to provide what are called &quot;user-defined functions&quot;. These functions allow one to perform behavior, such as ordering shares or calculating metrics derived from <code>FieldOperations</code>.</p><h2 id="Functions"><a class="docs-heading-anchor" href="#Functions">Functions</a><a id="Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Functions" title="Permalink"></a></h2><h3 id="Super-Important-Functions"><a class="docs-heading-anchor" href="#Super-Important-Functions">Super Important Functions</a><a id="Super-Important-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Super-Important-Functions" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Backtest.run" href="#Backtest.run"><code>Backtest.run</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">run(stratoptions::StrategyOptions)::Strategy</code></pre><p>Run a backtest and obtain the completed strategy object.</p><p><strong>Arguments</strong></p><ul><li><code>stratoptions::StrategyOptions</code>: all of the options to be used for the backtest</li></ul><p><strong>Returns</strong></p><ul><li><code>Strategy</code>: a completed <code>Strategy</code> object</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/maxholloway/Backtest.jl/blob/b334862d33e1dbebf75be53d6630edeaf977b037/src/Backtest.jl#L1341-L1352">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Backtest.StrategyOptions-Tuple{}" href="#Backtest.StrategyOptions-Tuple{}"><code>Backtest.StrategyOptions</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">StrategyOptions(; kwargs...)::StrategyOptions</code></pre><p><strong>Keyword Arguments</strong></p><p><strong>Required</strong></p><ul><li>datareaders::Dict{AssetId, &lt;:AbstractDataReader}: data source for each asset</li><li>fieldoperations::Vector{&lt;:AbstractFieldOperation}: field operations to be performed</li><li>start::{&lt;:Dates.TimeType}: start time for the backtest (this is the DateTime of the first bar of data to be read; actions start one bar later)</li><li>endtime::{&lt;:Dates.TimeType}: end time for the backtest</li></ul><p><strong>Optional</strong></p><ul><li><code>numlookbackbars::Integer</code>: number of backtest bars to store; if -1, then all data is stored; if space is an issue, this can be changed to a positive #. However, this will limit how much data can be accessed.</li><li><code>tradinginterval::{&lt;:Dates.TimePeriod}</code>: how much time there is between the start of a bar</li><li><code>verbosity:Type</code>: how much verbosity the backtest should have; INFO gives the most messages, and NOVERBOSITY gives the fewest</li><li><code>datadelay::{&lt;:Dates.Period}</code>: how much time transpires at the beginning of a bar before data is received; e.g. if this is 5 seconds, then data will be <code>received</code> by the backtest 5 seconds after the bar starts.</li><li><code>messagelatency::{&lt;:Dates.Period}</code>: how much time it takes to transmit a message to a brokerage/exchange</li><li><code>fieldoptimeout::{&lt;:Dates.Period}</code>: how much time until the field operation computatio times out; note that field operations are computed before the user receives data</li><li><code>datetimecol::String</code>: name of datetime column</li><li><code>opencol::String</code>: name of open column</li><li><code>highcol::String</code>: name of high column</li><li><code>lowcol::String</code>: name of low column</li><li><code>closecol::String</code>: name of close column</li><li><code>volumecol::String</code>: name of volume column</li><li><code>ondataevent::Function</code>: user-defined function that performs logic when data is received</li><li><code>onorderevent::Function</code>: user-defined function that performs logic when an order event is received</li><li><code>principal::{&lt;:Dates.Period}</code>: starting amount of buying power; in many cases this will be interpreted as a starting cash value</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/maxholloway/Backtest.jl/blob/b334862d33e1dbebf75be53d6630edeaf977b037/src/Backtest.jl#L1281-L1309">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Backtest.order!" href="#Backtest.order!"><code>Backtest.order!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">order!(strat::Strategy, order::OT)::OrderId where {OT&lt;:Orders.AbstractOrder}</code></pre><p>Place an order and obtain its <code>orderid</code>.</p><p><strong>Arguments</strong></p><ul><li><code>strat::Strategy</code>: the strategy object running that invokes this method</li><li><code>order::{&lt;:Orders.AbstractOrder}</code>:</li></ul><p><strong>Returns</strong></p><ul><li><code>OrderId</code>: identifier for the placed order.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/maxholloway/Backtest.jl/blob/b334862d33e1dbebf75be53d6630edeaf977b037/src/Backtest.jl#L1369-L1382">source</a></section></article><h3 id="Accessor-Functions"><a class="docs-heading-anchor" href="#Accessor-Functions">Accessor Functions</a><a id="Accessor-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Accessor-Functions" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Backtest.Engine.numbarsavailable" href="#Backtest.Engine.numbarsavailable"><code>Backtest.Engine.numbarsavailable</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">numbarsavailable(strat::Strategy)::Integer</code></pre><p><strong>Arguments</strong></p><ul><li><code>strat::Strategy</code>: the strategy object running that invokes this method</li></ul><p><strong>Returns</strong></p><ul><li><code>Integer</code>: the number of bars available from which we can retrieve data.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/maxholloway/Backtest.jl/blob/b334862d33e1dbebf75be53d6630edeaf977b037/src/Backtest.jl#L973-L981">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Backtest.Engine.data" href="#Backtest.Engine.data"><code>Backtest.Engine.data</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">data(strat::Strategy, ago::Integer)::NamedArray</code></pre><p><strong>Arguments</strong></p><ul><li><code>strat::Strategy</code>: the strategy object running when this method is invoked</li><li><code>ago::Integer</code>: the number of bars before the previous bar; if <code>ago</code> = 0, this accesses   the previous bar&#39;s data</li></ul><p><strong>Returns</strong></p><ul><li><code>NamedArray</code>: [assetid, fieldid]-&gt;value pairs for <code>ago</code> bars ago.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/maxholloway/Backtest.jl/blob/b334862d33e1dbebf75be53d6630edeaf977b037/src/Backtest.jl#L880-L890">source</a></section><section><div><pre><code class="language-none">data(strat::Strategy, ago::Integer, fieldid::FieldId)::NamedArray</code></pre><p><strong>Arguments</strong></p><ul><li><code>strat::Strategy</code>: the strategy object running when this method is invoked</li><li><code>ago::Integer</code>: the number of bars before the previous bar; if <code>ago</code> = 0, this accesses   the previous bar&#39;s data</li><li><code>fieldid::FieldId</code>: Note: <code>FieldId</code> is an alias for <code>String</code></li></ul><p><strong>Returns</strong></p><ul><li><code>NamedArray</code>: [fieldid]-&gt;value pairs for <code>ago</code> bars ago.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/maxholloway/Backtest.jl/blob/b334862d33e1dbebf75be53d6630edeaf977b037/src/Backtest.jl#L895-L906">source</a></section><section><div><pre><code class="language-none">data(strat::Strategy, ago::Integer, assetid::AssetId, fieldid::FieldId)</code></pre><p><strong>Arguments</strong></p><ul><li><code>strat::Strategy</code>: the strategy object running when this method is invoked</li><li><code>ago::Integer</code>: the number of bars before the previous bar; if <code>ago</code> = 0, this accesses   the previous bar&#39;s data</li><li><code>assetid::AssetId</code>: Note: <code>AssetId</code> is an alias for <code>String</code></li><li><code>fieldid::FieldId</code>: Note: <code>FieldId</code> is an alias for <code>String</code></li></ul><p><strong>Returns</strong></p><ul><li><code>{&lt;:Any}</code>: Object associated <code>ago</code> bars ago with this <code>assetid</code> and <code>fieldid</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/maxholloway/Backtest.jl/blob/b334862d33e1dbebf75be53d6630edeaf977b037/src/Backtest.jl#L911-L923">source</a></section><section><div><pre><code class="language-none">data(strat::Strategy)::NamedArray</code></pre><p><strong>Arguments</strong></p><ul><li><code>strat::Strategy</code>: the strategy object running when this method is invoked</li></ul><p><strong>Returns</strong></p><ul><li><code>NamedArray</code>: [assetid, fieldid]-&gt;value pairs for the previous bar</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/maxholloway/Backtest.jl/blob/b334862d33e1dbebf75be53d6630edeaf977b037/src/Backtest.jl#L928-L936">source</a></section><section><div><pre><code class="language-none">data(strat::Strategy, fieldid::FieldId)::NamedArray</code></pre><p><strong>Arguments</strong></p><ul><li><code>strat::Strategy</code>: the strategy object running when this method is invoked</li><li><code>fieldid::FieldId</code>: Note: <code>FieldId</code> is an alias for <code>String</code></li></ul><p><strong>Returns:</strong></p><ul><li><code>NamedArray</code>: assetid-&gt;value pairs for the previous bar.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/maxholloway/Backtest.jl/blob/b334862d33e1dbebf75be53d6630edeaf977b037/src/Backtest.jl#L941-L950">source</a></section><section><div><pre><code class="language-none">data(strat::Strategy, assetid::AssetId, fieldid::FieldId)</code></pre><p><strong>Arguments</strong></p><ul><li><code>strat::Strategy</code>: the strategy object running when this method is invoked</li><li><code>assetid::AssetId</code>: Note: <code>AssetId</code> is an alias for <code>String</code></li><li><code>fieldid::FieldId</code>: Note: <code>FieldId</code> is an alias for <code>String</code></li></ul><p><strong>Returns</strong></p><ul><li><code>{&lt;:Any}</code>: The object associated with <code>assetid</code> and <code>fieldid</code> for the previous bar.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/maxholloway/Backtest.jl/blob/b334862d33e1dbebf75be53d6630edeaf977b037/src/Backtest.jl#L955-L967">source</a></section></article><h3 id="Other-Functions"><a class="docs-heading-anchor" href="#Other-Functions">Other Functions</a><a id="Other-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Other-Functions" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Backtest.log" href="#Backtest.log"><code>Backtest.log</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">log(strat::Strategy, message::String, verbosity::Type)</code></pre><p>Write <code>message</code> to the console.</p><p><strong>Arguments</strong></p><ul><li><code>strat::Strategy</code>: the strategy object running that invokes this method</li><li><code>message::String</code>: message to be written to console</li><li><code>verbosity::Type</code>: the verbosity level to be used; see <code>Verbosity Levels</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/maxholloway/Backtest.jl/blob/b334862d33e1dbebf75be53d6630edeaf977b037/src/Backtest.jl#L987-L996">source</a></section></article><h2 id="Types"><a class="docs-heading-anchor" href="#Types">Types</a><a id="Types-1"></a><a class="docs-heading-anchor-permalink" href="#Types" title="Permalink"></a></h2><h3 id="High-Level-Types"><a class="docs-heading-anchor" href="#High-Level-Types">High-Level Types</a><a id="High-Level-Types-1"></a><a class="docs-heading-anchor-permalink" href="#High-Level-Types" title="Permalink"></a></h3><p>The following are types that all users must understand when running a backtest.</p><article class="docstring"><header><a class="docstring-binding" id="Backtest.StrategyOptions" href="#Backtest.StrategyOptions"><code>Backtest.StrategyOptions</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Options for running a backtest.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/maxholloway/Backtest.jl/blob/b334862d33e1dbebf75be53d6630edeaf977b037/src/Backtest.jl#L812-L814">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Backtest.Portfolio" href="#Backtest.Portfolio"><code>Backtest.Portfolio</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Information about the portfolio.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/maxholloway/Backtest.jl/blob/b334862d33e1dbebf75be53d6630edeaf977b037/src/Backtest.jl#L836">source</a></section></article><h3 id="Verbosity-Types"><a class="docs-heading-anchor" href="#Verbosity-Types">Verbosity Types</a><a id="Verbosity-Types-1"></a><a class="docs-heading-anchor-permalink" href="#Verbosity-Types" title="Permalink"></a></h3><p>These types allow users to specify how much verbosity they want in their backtests. They are ordered here from most to least verbose.</p><article class="docstring"><header><a class="docstring-binding" id="Backtest.AbstractVerbosity" href="#Backtest.AbstractVerbosity"><code>Backtest.AbstractVerbosity</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Top of the verbosity type hierarchy. In practice, this is not intended to be a user-facing type, however it can be used if a user wants to log every possible message in the backtest.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/maxholloway/Backtest.jl/blob/b334862d33e1dbebf75be53d6630edeaf977b037/src/Backtest.jl#L791-L794">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Backtest.INFO" href="#Backtest.INFO"><code>Backtest.INFO</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Log all messages at the INFO level or below. This is a lot of verbosity. Supertype: <code>AbstractVerbosity</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/maxholloway/Backtest.jl/blob/b334862d33e1dbebf75be53d6630edeaf977b037/src/Backtest.jl#L796-L798">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Backtest.TRANSACTIONS" href="#Backtest.TRANSACTIONS"><code>Backtest.TRANSACTIONS</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Log all messages related to transactions, and all messages at a lower level. Supertype: <code>INFO</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/maxholloway/Backtest.jl/blob/b334862d33e1dbebf75be53d6630edeaf977b037/src/Backtest.jl#L800-L802">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Backtest.WARNING" href="#Backtest.WARNING"><code>Backtest.WARNING</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Log all messages that give warnings or important information. This is very low verbosity. Supertype: <code>TRANSACTIONS</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/maxholloway/Backtest.jl/blob/b334862d33e1dbebf75be53d6630edeaf977b037/src/Backtest.jl#L804-L806">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Backtest.NOVERBOSITY" href="#Backtest.NOVERBOSITY"><code>Backtest.NOVERBOSITY</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Log no messages at all. Supertype: <code>WARNING</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/maxholloway/Backtest.jl/blob/b334862d33e1dbebf75be53d6630edeaf977b037/src/Backtest.jl#L808-L810">source</a></section></article><h3 id="Low-Level-Types"><a class="docs-heading-anchor" href="#Low-Level-Types">Low-Level Types</a><a id="Low-Level-Types-1"></a><a class="docs-heading-anchor-permalink" href="#Low-Level-Types" title="Permalink"></a></h3><p>The following are types that users should never have to access directly.</p><article class="docstring"><header><a class="docstring-binding" id="Backtest.Strategy" href="#Backtest.Strategy"><code>Backtest.Strategy</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Container for all backtest run-time state. <code>Strategy</code> objects should <strong>not</strong> be modified within user-provided functions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/maxholloway/Backtest.jl/blob/b334862d33e1dbebf75be53d6630edeaf977b037/src/Backtest.jl#L844-L847">source</a></section></article></article></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Saturday 8 August 2020 21:08">Saturday 8 August 2020</span>. Using Julia version 1.4.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
